<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:AppQLNV_DL.ViewModels"
             x:Class="AppQLNV_DL.Views.StatisticalPage"
             x:DataType="vm:StatisticalViewModel"
             Title="Thá»‘ng kÃª há»‡ thá»‘ng"
             BackgroundColor="#F5F6FA">

    <ContentPage.BindingContext>
        <vm:StatisticalViewModel />
    </ContentPage.BindingContext>

    <!-- ThÃªm RefreshView á»Ÿ Ä‘Ã¢y -->
    <RefreshView Command="{Binding RefreshCommand}" IsRefreshing="{Binding IsRefreshing}">
        <ScrollView>
            <VerticalStackLayout Spacing="20" Padding="20">

                <!-- TIÃŠU Äá»€ TRANG -->
                <VerticalStackLayout Spacing="5" Margin="0,10,0,10">
                    <Label Text="BÃ¡o cÃ¡o cÃ´ng viá»‡c"
                           FontSize="26"
                           FontAttributes="Bold"
                           TextColor="#2C3E50"/>
                    <Label Text="Theo dÃµi hiá»‡u suáº¥t lÃ m viá»‡c cá»§a báº¡n"
                           FontSize="14"
                           TextColor="Gray"/>
                </VerticalStackLayout>

                <!-- CÃC THáºº TÃ“M Táº®T NHANH (STATS CARDS) -->
                <Grid ColumnDefinitions="*, *" ColumnSpacing="15">
                    <!-- Tháº» Tá»•ng cÃ´ng viá»‡c -->
                    <Border Grid.Column="0"
                            StrokeShape="RoundRectangle 15"
                            BackgroundColor="White"
                            Padding="15"
                            StrokeThickness="0">
                        <Border.Shadow>
                            <Shadow Brush="Black" Offset="0,2" Opacity="0.05" Radius="5"/>
                        </Border.Shadow>
                        <VerticalStackLayout Spacing="5">
                            <Label Text="ðŸ’¼" FontSize="24"/>
                            <Label Text="Tá»•ng viá»‡c" FontSize="14" TextColor="Gray"/>
                            <Label Text="{Binding TotalJobsCount}" FontSize="20" FontAttributes="Bold" TextColor="#34495E"/>
                        </VerticalStackLayout>
                    </Border>

                    <!-- Tháº» Äang xá»­ lÃ½ -->
                    <Border Grid.Column="1"
                            StrokeShape="RoundRectangle 15"
                            BackgroundColor="White"
                            Padding="15"
                            StrokeThickness="0">
                        <Border.Shadow>
                            <Shadow Brush="Black" Offset="0,2" Opacity="0.05" Radius="5"/>
                        </Border.Shadow>
                        <VerticalStackLayout Spacing="5">
                            <Label Text="âš¡" FontSize="24"/>
                            <Label Text="Äang lÃ m" FontSize="14" TextColor="Gray"/>
                            <Label Text="{Binding ProcessingJobsCount}" FontSize="20" FontAttributes="Bold" TextColor="#E67E22"/>
                        </VerticalStackLayout>
                    </Border>
                </Grid>

                <!-- PHáº¦N CHÃNH: NÃšT CHUYá»‚N TRANG Dáº NG CARD Lá»šN -->
                <Border StrokeShape="RoundRectangle 20"
                        BackgroundColor="White"
                        Padding="0"
                        StrokeThickness="0">
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,5" Opacity="0.1" Radius="10"/>
                    </Border.Shadow>

                    <VerticalStackLayout>
                        <VerticalStackLayout Padding="20" Spacing="10">
                            <Label Text="Lá»‹ch sá»­ HoÃ n thÃ nh"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="#2C3E50"/>
                            <Label Text="Xem láº¡i toÃ n bá»™ danh sÃ¡ch cÃ¡c cÃ´ng viá»‡c Ä‘Ã£ Ä‘Æ°á»£c xá»­ lÃ½ xong trong thÃ¡ng nÃ y."
                                   FontSize="13"
                                   TextColor="Gray"
                                   LineBreakMode="WordWrap"/>

                            <Button Text="CÃ”NG VIá»†C THÃNG NÃ€Y"
                                    Command="{Binding GoToMonthlyPageCommand}"
                                    BackgroundColor="RoyalBlue"
                                    TextColor="White"
                                    FontAttributes="Bold"
                                    CornerRadius="10"
                                    HeightRequest="50"
                                    Margin="0,10,0,0">
                            </Button>

                            <Button Text="CÃ”NG VIá»†C THÃNG TRÆ¯á»šC"
                                    Command="{Binding GoToLastMonthJobPageCommand}"
                                    BackgroundColor="RoyalBlue"
                                    TextColor="White"
                                    FontAttributes="Bold"
                                    CornerRadius="10"
                                    HeightRequest="50"
                                    Margin="0,10,0,0">
                            </Button>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>
        </ScrollView>
    </RefreshView>
</ContentPage>