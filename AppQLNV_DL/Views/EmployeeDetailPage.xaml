<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="AppQLNV_DL.Views.EmployeeDetailPage"
             xmlns:viewmodels="clr-namespace:AppQLNV_DL.ViewModels"
             Title="Há»“ sÆ¡ nhÃ¢n viÃªn"
             BackgroundColor="#F5F6FA">

    <ScrollView>
        <!-- Chá»‰ hiá»ƒn thá»‹ khi cÃ³ dá»¯ liá»‡u (giá»¯ logic Converter cá»§a báº¡n) -->
        <VerticalStackLayout Padding="25" Spacing="20" 
                             IsVisible="{Binding CurrentEmployee, Converter={StaticResource IsNotNullConverter}}">

            <!-- 1. KHá»I AVATAR -->
            <VerticalStackLayout HorizontalOptions="Center" Spacing="10" Margin="0,10,0,10">
                <Border WidthRequest="120" 
                        HeightRequest="120" 
                        StrokeShape="RoundRectangle 60" 
                        StrokeThickness="4"
                        Stroke="White"
                        BackgroundColor="White">
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,5" Radius="15" Opacity="0.1"/>
                    </Border.Shadow>

                    <Image Source="{Binding CurrentEmployee.AvatarUrl, TargetNullValue='user_placeholder.png'}" 
                           Aspect="AspectFill"
                           Margin="0"/>
                </Border>

                <Label Text="{Binding CurrentEmployee.FullName}" 
                       FontSize="24" 
                       FontAttributes="Bold" 
                       TextColor="#2C3E50" 
                       HorizontalOptions="Center"/>
                <Label Text="NhÃ¢n viÃªn chÃ­nh thá»©c" 
                       FontSize="14" 
                       TextColor="RoyalBlue" 
                       HorizontalOptions="Center"/>
            </VerticalStackLayout>

            <!-- 2. KHá»I THÃ”NG TIN CHI TIáº¾T (CARD) -->
            <Border StrokeShape="RoundRectangle 15" 
                    StrokeThickness="0" 
                    BackgroundColor="White" 
                    Padding="20">
                <Border.Shadow>
                    <Shadow Brush="Black" Offset="0,2" Radius="10" Opacity="0.05"/>
                </Border.Shadow>

                <VerticalStackLayout Spacing="15">
                    <!-- DÃ²ng CCCD -->
                    <Grid ColumnDefinitions="40, *">
                        <Label Text="ðŸ†”" FontSize="20" VerticalOptions="Center"/>
                        <VerticalStackLayout Grid.Column="1" Spacing="2">
                            <Label Text="Sá»‘ CCCD" FontSize="12" TextColor="Gray"/>
                            <Label Text="{Binding CurrentEmployee.CitizenId}" FontSize="16" FontAttributes="Bold" TextColor="#2D3436"/>
                        </VerticalStackLayout>
                    </Grid>

                    <BoxView HeightRequest="1" Color="#F0F0F0"/>

                    <!-- DÃ²ng SÄT -->
                    <Grid ColumnDefinitions="40, *">
                        <Label Text="ðŸ“ž" FontSize="20" VerticalOptions="Center"/>
                        <VerticalStackLayout Grid.Column="1" Spacing="2">
                            <Label Text="Sá»‘ Ä‘iá»‡n thoáº¡i" FontSize="12" TextColor="Gray"/>
                            <Label Text="{Binding CurrentEmployee.PhoneNumber}" FontSize="16" FontAttributes="Bold" TextColor="#2D3436"/>
                        </VerticalStackLayout>
                    </Grid>

                    <BoxView HeightRequest="1" Color="#F0F0F0"/>

                    <!-- DÃ²ng Tráº¡ng thÃ¡i (VÃ­ dá»¥ thÃªm) -->
                    <Grid ColumnDefinitions="40, *">
                        <Label Text="ðŸ›¡ï¸" FontSize="20" VerticalOptions="Center"/>
                        <VerticalStackLayout Grid.Column="1" Spacing="2">
                            <Label Text="Tráº¡ng thÃ¡i tÃ i khoáº£n" FontSize="12" TextColor="Gray"/>
                            <Label Text="Äang hoáº¡t Ä‘á»™ng" FontSize="16" FontAttributes="Bold" TextColor="#27AE60"/>
                        </VerticalStackLayout>
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- 3. KHá»I NÃšT Báº¤M HÃ€NH Äá»˜NG -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="15" Margin="0,10,0,20">
                <!-- NÃºt Sá»­a -->
                <Button Grid.Column="0" 
                        Text="CHá»ˆNH Sá»¬A" 
                        FontSize="14" 
                        FontAttributes="Bold"
                        TextColor="White"
                        BackgroundColor="RoyalBlue"
                        HeightRequest="55"
                        CornerRadius="12"
                        Command="{Binding EditCommand}">
                    <Button.Shadow>
                        <Shadow Brush="RoyalBlue" Offset="0,4" Radius="8" Opacity="0.3"/>
                    </Button.Shadow>
                </Button>

                <!-- NÃºt XÃ³a -->
                <Button Grid.Column="1" 
                        Text="XÃ“A Há»’ SÆ " 
                        FontSize="14" 
                        FontAttributes="Bold"
                        TextColor="#E74C3C"
                        BackgroundColor="White"
                        BorderColor="#E74C3C"
                        BorderWidth="1.5"
                        HeightRequest="55"
                        CornerRadius="12"
                        Command="{Binding DeleteCommand}">
                </Button>
            </Grid>
            <Button Text="RESET Máº¬T KHáº¨U"
                    FontSize="14"
                    FontAttributes="Bold"
                    TextColor="White"
                    BackgroundColor="#E74C3C"
                    HeightRequest="55"
                    CornerRadius="12"
                    Command="{Binding ResetPasswordCommand}">
                <Button.Shadow>
                    <Shadow Brush="#E74C3C" Offset="0,4" Radius="8" Opacity="0.3"/>
                </Button.Shadow>
            </Button>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>