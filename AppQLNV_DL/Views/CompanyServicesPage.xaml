<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:AppQLNV_DL.ViewModels"
             x:Class="AppQLNV_DL.Views.CompanyServicesPage"
             Title="Dịch vụ của công ty"
             BackgroundColor="#F5F6F7"
             Padding="10">

    <ContentPage.BindingContext>
        <vm:CompanyServicesViewModel />
    </ContentPage.BindingContext>

    <Grid RowDefinitions="Auto, *" RowSpacing="10">
        <!-- Thay đổi ở đây: RowDefinitions="Auto, *" -->

        <!-- Phần thêm dịch vụ (Entry và Button) giờ ở Grid.Row="0" -->
        <Grid Grid.Row="0" ColumnSpacing="15" Padding="20,10,20,10" BackgroundColor="#F0F2F5">
            <!-- Thêm CornerRadius="10" ở đây để phần này cũng có góc bo tròn -->
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Entry Grid.Column="0"
                   Placeholder="Nhập tên dịch vụ"
                   Text="{Binding NewServiceName}"
                   HeightRequest="45"
                   BackgroundColor="White"
                   PlaceholderColor="#7F8C8D"
                   TextColor="#2C3E50"
                   ClearButtonVisibility="WhileEditing">
                <Entry.Shadow>
                    <Shadow Brush="Black" Offset="5,5" Radius="10" Opacity="0.1"/>
                </Entry.Shadow>
            </Entry>

            <Button Grid.Column="1"
                    Text="Thêm"
                    Command="{Binding AddServiceCommand}"
                    BackgroundColor="#3498DB"
                    TextColor="White"
                    CornerRadius="8"
                    Padding="15,0"
                    HeightRequest="45"
                    FontSize="16">
                <Button.Shadow>
                    <Shadow Brush="Black" Offset="5,5" Radius="10" Opacity="0.1"/>
                </Button.Shadow>
            </Button>
        </Grid>

        <!-- CollectionView hiển thị danh sách dịch vụ giờ ở Grid.Row="1" -->
        <CollectionView Grid.Row="1"
                        ItemsSource="{Binding Services}"
                        SelectionMode="None"
                        RemainingItemsThreshold="0">
            <CollectionView.EmptyView>
                <VerticalStackLayout VerticalOptions="CenterAndExpand" HorizontalOptions="CenterAndExpand">
                    <Label Text="Không có dịch vụ nào."
                           HorizontalOptions="Center"
                           VerticalOptions="Center"
                           FontSize="16"
                           TextColor="#7F8C8D"/>
                </VerticalStackLayout>
            </CollectionView.EmptyView>

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Border StrokeShape="RoundRectangle 10" StrokeThickness="0" BackgroundColor="White" Margin="0,5,0,5">
                        <Border.Shadow>
                            <Shadow Brush="Black" Offset="0,2" Radius="5" Opacity="0.05"/>
                        </Border.Shadow>
                        <Grid ColumnDefinitions="*, Auto" Padding="7">
                            <Label Grid.Column="0" Text="{Binding ServiceName}" FontAttributes="Bold" FontSize="16" TextColor="#2C3E50" VerticalOptions="Center"/>
                            <Button Grid.Column="1"
                                    Text="Xóa"
                                    Command="{Binding Source={RelativeSource AncestorType={x:Type vm:CompanyServicesViewModel}}, Path=DeleteServiceCommand}"
                                    CommandParameter="{Binding .}"
                                    BackgroundColor="#E74C3C"
                                    TextColor="White"
                                    CornerRadius="5"
                                    Padding="10,5"
                                    VerticalOptions="Center"
                                    HorizontalOptions="End" />
                        </Grid>
                    </Border>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>
</ContentPage>